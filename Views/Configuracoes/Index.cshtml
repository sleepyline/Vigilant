@model VigiLant.Models.MqttConfiguration
@{
    ViewData["Title"] = "Configurações Globais do Sistema";
}

<div class="page-header">
    <h1 class="page-title">Configurações Globais</h1>
    <div class="breadcrumb">
        <a href="@Url.Action("Index", "Home")">Dashboard</a>
        <span class="separator">/</span>
        <span class="active">Configurações MQTT</span>
    </div>
</div>

<div class="form-container">
    <form asp-action="Index" asp-controller="Configuracoes" method="post">
        <input type="hidden" asp-for="Id" />

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success" role="alert">
                <i class="fas fa-check-circle"></i> @TempData["SuccessMessage"]
            </div>
        }

        <div class="card">
            <div class="card-header">
                <h2>Configurações do Broker MQTT (Global)</h2>
                <p class="text-muted">Estes são os detalhes da sua instalação do **MQTTX.app** ou qualquer outro Broker central. Essas configurações serão usadas para todas as conexões de sensores.</p>
            </div>
            <div class="card-body">
                
                <div class="form-group">
                    <label asp-for="BrokerHost"></label>
                    <input asp-for="BrokerHost" class="form-control" placeholder="Ex: localhost ou 192.168.1.10" required />
                    <span asp-validation-for="BrokerHost" class="text-danger"></span>
                </div>
                
                <div class="form-group">
                    <label asp-for="BrokerPort"></label>
                    <input asp-for="BrokerPort" class="form-control" type="number" placeholder="Ex: 1883" required />
                    <span asp-validation-for="BrokerPort" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="BaseTopic"></label>
                    <input asp-for="BaseTopic" class="form-control" placeholder="Ex: vigilant/sensores" required />
                    <small class="form-text text-muted">O Tópico completo será gerado como: <mark>@Model.BaseTopic/&lt;TIPO_SENSOR&gt;/&lt;NOME_SENSOR&gt;</mark></small>
                    <span asp-validation-for="BaseTopic" class="text-danger"></span>
                </div>
                
            </div>
        </div>

        <div class="page-actions mt-4">
            <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Salvar Configurações</button>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}